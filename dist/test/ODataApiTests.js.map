{"version":3,"sources":["test/ODataApiTests.ts"],"names":[],"mappings":";;AACA,8CAA2C;AAC3C,4CAAyC;AAEzC,6BAA6B;AAE7B,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAE3B,QAAQ,CAAC,UAAU,EAAE;IACjB,IAAI,MAAM,GAAG,EAAE,CAAA;IACf,UAAU,CAAC;QACP,MAAM,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC;QACrC,MAAM,CAAC,SAAS,CAAC,GAAG,iCAAiC,CAAC;IAC1D,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,oDAAoD,EAAE;QACrD,MAAM,OAAO,GAAG,IAAI,mBAAQ,CAAC,mBAAmB,CAAC,EAAE,IAAI,EAAE,oBAAoB,EAAE,CAAC,CAAA;QAChF,MAAM,CAAC,OAAO,mBAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACnE,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,kEAAkE,EAAE;QACnE,MAAM,OAAO,GAAG,IAAI,mBAAQ,CAAC,mBAAmB,CAAC,EAAE,IAAI,EAAE,oBAAoB,EAAE,CAAC,CAAA;QAChF,MAAM,CAAC,OAAO,mBAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACrE,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,+DAA+D,EAAE;QAChE,MAAM,OAAO,GAAG,IAAI,iBAAO,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC,CAAC;QAChF,MAAM,CAAC,OAAO,mBAAQ,CAAC,aAAa,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC5F,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,+DAA+D,EAAE;QAChE,MAAM,CAAC,OAAO,mBAAQ,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,8DAA8D,EAAE;QAC/D,MAAM,CAAC,OAAO,mBAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC3F,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,4DAA4D,EAAE;QAC7D,MAAM,CAAC,OAAO,mBAAQ,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACzF,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,uGAAuG,EAAE;QACxG,IAAI,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAA;QACrF,MAAM,CAAC,OAAO,mBAAQ,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,yGAAyG,EAAE;QAC1G,IAAI,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,qBAAqB,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAA;QACzG,MAAM,CAAC,OAAO,mBAAQ,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,sGAAsG,EAAE;QACvG,IAAI,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAA;QACjH,MAAM,CAAC,OAAO,mBAAQ,CAAC,kBAAkB,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAE,iBAAiB,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACtH,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,oHAAoH,EAAE;QACrH,IAAI,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAA;QAChI,MAAM,CAAC,OAAO,mBAAQ,CAAC,kBAAkB,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAE,iBAAiB,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACtH,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,+GAA+G,EAAE;QAChH,IAAI,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,eAAe,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAClH,MAAM,CAAC,OAAO,mBAAQ,CAAC,kBAAkB,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAE,UAAU,EAAE,qFAAqF,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC3L,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,+DAA+D,EAAE;QAChE,MAAM,CAAC,OAAO,mBAAQ,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,+DAA+D,EAAE;QAChE,MAAM,CAAC,OAAO,mBAAQ,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACvF,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,2DAA2D,EAAE;QAC5D,MAAM,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACpJ,MAAM,CAAC,OAAO,mBAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACnH,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,2DAA2D,EAAE;QAC5D,MAAM,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QACrJ,MAAM,CAAC,OAAO,mBAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IACnH,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,4DAA4D,EAAE;QAC7D,MAAM,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAC3G,MAAM,CAAC,OAAO,mBAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC7E,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,4DAA4D,EAAE;QAC7D,MAAM,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5G,MAAM,CAAC,OAAO,mBAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,EAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC7E,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,4DAA4D,EAAE;QAC7D,MAAM,MAAM,GAAG,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5G,MAAM,CAAC,OAAO,mBAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,mCAAmC,EAAE;QACpC,MAAM,MAAM,GAAG,IAAI,mBAAQ,CAAC,WAAW,CAAC,EAAE,MAAM,EAAE,aAAa,EAAE,CAAC,CAAC;QACnE,MAAM,CAAC,OAAO,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,+BAA+B,EAAE;QAC5B,MAAM,YAAY,GAAG,mBAAQ,CAAC,mBAAmB,EAAE,CAAC;QACpD,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC;IACH,EAAE,CAAC,oBAAoB,EAAE;QACrB,MAAM,GAAG,GAAG,mBAAQ,CAAC,QAAQ,EAAE,CAAC;QAChC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,2CAA2C,CAAC,CAAC;IACtE,CAAC,CAAC,CAAC;IAEP,QAAQ,CAAC,0BAA0B,EAAE;QACjC,UAAU,CAAC;YACP,MAAM,CAAC,QAAQ,CAAC,GAAG;gBACf,YAAY,EAAE,OAAO;gBACrB,OAAO,EAAE,iCAAiC;aAC7C,CAAA;QACL,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,+BAA+B,EAAE;YAChC,MAAM,YAAY,GAAG,mBAAQ,CAAC,mBAAmB,EAAE,CAAC;YACpD,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,oBAAoB,EAAE;YACrB,MAAM,GAAG,GAAG,mBAAQ,CAAC,QAAQ,EAAE,CAAC;YAChC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,uCAAuC,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC","file":"test/ODataApiTests.js","sourcesContent":["///<reference path=\"../node_modules/@types/mocha/index.d.ts\"/>\r\nimport { ODataApi } from '../src/ODataApi';\r\nimport { Content } from '../src/Content';\r\nimport { SetSiteUrl, SetServiceToken } from '../src/Common'\r\nimport * as Chai from 'chai';\r\nimport * as sinon from 'sinon';\r\nconst expect = Chai.expect;\r\n\r\ndescribe('ODataApi', () => {\r\n    let window = {}\r\n    beforeEach(() => {\r\n        window['serviceToken'] = 'OData.svc';\r\n        window['siteUrl'] = \"https://daily.demo.sensenet.com\";\r\n    });\r\n    it(\"request a Content and returns an Observable object\", function () {\r\n        const options = new ODataApi.ODataRequestOptions({ path: '/workspace/project' })\r\n        expect(typeof ODataApi.GetContent(options)).to.be.eq('object');\r\n    });\r\n    it(\"request a collection of Content and returns an Observable object\", function () {\r\n        const options = new ODataApi.ODataRequestOptions({ path: '/workspace/project' })\r\n        expect(typeof ODataApi.FetchContent(options)).to.be.eq('object');\r\n    });\r\n    it(\"requests to create a Content and returns an Observable object\", function () {\r\n        const content = new Content({ Id: 1, Type: 'Article', DisplayName: 'Article' });\r\n        expect(typeof ODataApi.CreateContent('/workspace/project', content)).to.be.eq('object');\r\n    });\r\n    it(\"requests to delete a Content and returns an Observable object\", function () {\r\n        expect(typeof ODataApi.DeleteContent(1111, false)).to.be.eq('object');\r\n    });\r\n    it(\"requests to patch a Content and returns an Observable object\", function () {\r\n        expect(typeof ODataApi.PatchContent(1111, { DisplayName: 'test' })).to.be.eq('object');\r\n    });\r\n    it(\"requests to put a Content and returns an Observable object\", function () {\r\n        expect(typeof ODataApi.PutContent(1111, { DisplayName: 'test' })).to.be.eq('object');\r\n    });\r\n    it(\"requests to create a custom action (checkout) by id, sends a request and returns an Observable object\", function () {\r\n        let action = new ODataApi.CustomAction({ name: 'CheckOut', id: 111, isAction: true })\r\n        expect(typeof ODataApi.CreateCustomAction(action)).to.be.eq('object');\r\n    });\r\n    it(\"requests to create a custom action (checkout) by path, sends a request and returns an Observable object\", function () {\r\n        let action = new ODataApi.CustomAction({ name: 'CheckOut', path: '/workspaces/project', isAction: true })\r\n        expect(typeof ODataApi.CreateCustomAction(action)).to.be.eq('object');\r\n    });\r\n    it(\"requests to create a custom action (chekcin) by id, sends a request and returns an Observable object\", function () {\r\n        let action = new ODataApi.CustomAction({ name: 'CheckIn', id: 111, isAction: true, params: ['checkInComments'] })\r\n        expect(typeof ODataApi.CreateCustomAction(action, { data: { 'checkInComments': 'comment' } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to create a custom action (chekcin) by id without cache, sends a request and returns an Observable object\", function () {\r\n        let action = new ODataApi.CustomAction({ name: 'CheckIn', id: 111, isAction: true, noCache: true, params: ['checkInComments'] })\r\n        expect(typeof ODataApi.CreateCustomAction(action, { data: { 'checkInComments': 'comment' } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to create a custom function (getpermissions) by id, sends a request and returns an Observable object\", function () {\r\n        let action = new ODataApi.CustomAction({ name: 'GetPermission', id: 111, isAction: false, params: ['identity'] });\r\n        expect(typeof ODataApi.CreateCustomAction(action, { data: { 'identity': '/Root/Sites/Default_Site/workspaces/Project/budapestprojectworkspace/Groups/Members' } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to upload a Content and returns an Observable object\", function () {\r\n        expect(typeof ODataApi.Upload('/workspaces/Project', {}, false)).to.be.eq('object');\r\n    });\r\n    it(\"requests to upload a Content and returns an Observable object\", function () {\r\n        expect(typeof ODataApi.Upload('/workspaces/Project', {}, true)).to.be.eq('object');\r\n    });\r\n    it(\"requests to login a user and returns an Observable object\", function () {\r\n        const action = new ODataApi.CustomAction({ name: 'Login', path: '/Root', isAction: true, requiredParams: ['username', 'password'], noCache: true });\r\n        expect(typeof ODataApi.Login(action, { data: { 'userName': 'alba', 'password': 'alba' } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to login a user and returns an Observable object\", function () {\r\n        const action = new ODataApi.CustomAction({ name: 'Login', path: '/Root', isAction: true, requiredParams: ['username', 'password'], noCache: false });\r\n        expect(typeof ODataApi.Login(action, { data: { 'userName': 'alba', 'password': 'alba' } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to logout a user and returns an Observable object\", function () {\r\n        const action = new ODataApi.CustomAction({ name: 'Logout', path: '/Root', isAction: true, noCache: true });\r\n        expect(typeof ODataApi.Logout(action, { data: { } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to logout a user and returns an Observable object\", function () {\r\n        const action = new ODataApi.CustomAction({ name: 'Logout', path: '/Root', isAction: true, noCache: false });\r\n        expect(typeof ODataApi.Logout(action, { data: { } })).to.be.eq('object');\r\n    });\r\n    it(\"requests to logout a user and returns an Observable object\", function () {\r\n        const action = new ODataApi.CustomAction({ name: 'Logout', path: '/Root', isAction: true, noCache: false });\r\n        expect(typeof ODataApi.Logout(action)).to.be.eq('object');\r\n    });\r\n    it(\"creates a new copy of ODataParams\", () => {\r\n        const params = new ODataApi.ODataParams({ select: 'DisplayName' });\r\n        expect(typeof params).to.be.eq('object');\r\n    });\r\n    it(\"calls the ODATA_SERVICE_TOKEN\", () => {\r\n            const serviceToken = ODataApi.ODATA_SERVICE_TOKEN();\r\n            expect(serviceToken).to.be.eq('OData.svc');\r\n        });\r\n        it(\"calls the ROOT_URL\", () => {\r\n            const url = ODataApi.ROOT_URL();\r\n            expect(url).to.be.eq('https://daily.demo.sensenet.com/OData.svc');\r\n        });\r\n\r\n    describe('tests with window object', () => {\r\n        beforeEach(function () {\r\n            global['window'] = {\r\n                serviceToken: 'odata',\r\n                siteUrl: \"https://daily.demo.sensenet.com\"\r\n            }\r\n        });\r\n        it(\"calls the ODATA_SERVICE_TOKEN\", () => {\r\n            const serviceToken = ODataApi.ODATA_SERVICE_TOKEN();\r\n            expect(serviceToken).to.be.eq('odata');\r\n        });\r\n        it(\"calls the ROOT_URL\", () => {\r\n            const url = ODataApi.ROOT_URL();\r\n            expect(url).to.be.eq('https://daily.demo.sensenet.com/odata');\r\n        });\r\n    });\r\n\r\n});"],"sourceRoot":"/source/"}